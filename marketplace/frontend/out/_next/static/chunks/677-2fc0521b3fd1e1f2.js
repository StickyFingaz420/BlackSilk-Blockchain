"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[677],{6677:function(e,t,s){s.d(t,{kz:function(){return n.ZP},Hb:function(){return EscrowStatus},e4:function(){return a.Z},BG:function(){return components_OrderTracking},Uh:function(){return l.Z},Il:function(){return r.Z},yT:function(){return components_ShoppingCart}});var r=s(275);s(4972);var a=s(5401),n=s(2972),l=s(1290),c=s(5893),d=s(7294);let EscrowStatus=e=>{let{escrowAddress:t,status:s,amount:r,disputeDeadline:a,className:n=""}=e,l=(()=>{switch(s){case"pending":return{color:"text-yellow-400",bg:"bg-yellow-900/20",border:"border-yellow-700/50",icon:"⏳",text:"Pending Payment"};case"funded":return{color:"text-blue-400",bg:"bg-blue-900/20",border:"border-blue-700/50",icon:"\uD83D\uDCB0",text:"Funds Secured"};case"completed":return{color:"text-green-400",bg:"bg-green-900/20",border:"border-green-700/50",icon:"✅",text:"Released to Seller"};case"disputed":return{color:"text-red-400",bg:"bg-red-900/20",border:"border-red-700/50",icon:"⚖️",text:"Under Dispute"};case"refunded":return{color:"text-gray-400",bg:"bg-gray-900/20",border:"border-gray-700/50",icon:"↩️",text:"Refunded to Buyer"};default:return{color:"text-gray-400",bg:"bg-gray-900/20",border:"border-gray-700/50",icon:"❓",text:"Unknown Status"}}})();return(0,c.jsxs)("div",{className:"".concat(l.bg," ").concat(l.border," border rounded-lg p-4 ").concat(n),children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("span",{className:"text-lg",children:l.icon}),(0,c.jsx)("div",{className:"".concat(l.color," font-semibold"),children:l.text})]}),(0,c.jsxs)("div",{className:"text-amber-300 font-semibold",children:[r.toFixed(3)," BLK"]})]}),(0,c.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Escrow Address:"}),(0,c.jsxs)("span",{className:"text-amber-300 font-mono",children:[t.slice(0,12),"..."]})]}),a&&(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Dispute Deadline:"}),(0,c.jsx)("span",{className:"text-amber-300",children:new Date(1e3*a).toLocaleDateString()})]})]})]})};var components_OrderTracking=e=>{var t;let{order:s,onAction:r}=e,formatDate=e=>new Date(1e3*e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),getProgressPercentage=e=>{switch(e){case"pending":return 25;case"funded":return 50;case"completed":case"refunded":return 100;case"disputed":return 75;default:return 0}};return(0,c.jsxs)("div",{className:"bg-black/40 border border-amber-800/30 rounded-lg p-6",children:[(0,c.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("h3",{className:"text-amber-300 text-lg font-semibold mb-1",children:["Order #",s.id.slice(0,8),"..."]}),(0,c.jsxs)("p",{className:"text-gray-400 text-sm",children:["Placed ",formatDate(s.createdAt)]})]}),(0,c.jsxs)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"pending":return"text-yellow-400 bg-yellow-900/20";case"funded":return"text-blue-400 bg-blue-900/20";case"completed":return"text-green-400 bg-green-900/20";case"disputed":return"text-red-400 bg-red-900/20";default:return"text-gray-400 bg-gray-900/20"}})(s.escrowStatus)),children:[(e=>{switch(e){case"pending":return"⏳";case"funded":return"\uD83D\uDCB0";case"completed":return"✅";case"disputed":return"⚖️";case"refunded":return"↩️";default:return"❓"}})(s.escrowStatus)," ",(e=>{switch(e){case"pending":return"Awaiting Payment";case"funded":return"Payment Confirmed";case"completed":return"Order Completed";case"disputed":return"Under Dispute";case"refunded":return"Refunded";default:return"Unknown Status"}})(s.escrowStatus)]})]}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mb-2",children:[(0,c.jsx)("span",{children:"Order Progress"}),(0,c.jsxs)("span",{children:[getProgressPercentage(s.escrowStatus),"%"]})]}),(0,c.jsx)("div",{className:"w-full bg-gray-800 rounded-full h-2",children:(0,c.jsx)("div",{className:"bg-amber-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(getProgressPercentage(s.escrowStatus),"%")}})})]}),(0,c.jsx)("div",{className:"space-y-3 mb-6",children:s.items.map((e,t)=>(0,c.jsxs)("div",{className:"flex items-center space-x-4 p-3 bg-gray-900/30 rounded-lg",children:[(0,c.jsx)("div",{className:"w-12 h-12 bg-gray-700 rounded-lg flex items-center justify-center",children:"\uD83D\uDCE6"}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h4",{className:"text-amber-300 font-medium",children:e.productTitle}),(0,c.jsxs)("p",{className:"text-gray-400 text-sm",children:["Quantity: ",e.quantity," \xd7 ",e.price.toFixed(3)," BLK"]})]}),(0,c.jsxs)("div",{className:"text-amber-400 font-semibold",children:[(e.quantity*e.price).toFixed(3)," BLK"]})]},t))}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6 text-sm",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"text-gray-400",children:"Total Amount"}),(0,c.jsxs)("div",{className:"text-amber-300 font-semibold",children:[s.totalAmount.toFixed(3)," BLK"]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"text-gray-400",children:"Escrow Address"}),(0,c.jsxs)("div",{className:"text-amber-300 font-mono text-xs",children:[null===(t=s.escrowAddress)||void 0===t?void 0:t.slice(0,12),"..."]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"text-gray-400",children:"Seller"}),(0,c.jsxs)("div",{className:"text-amber-300 font-mono text-xs",children:[s.seller.slice(0,12),"..."]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"text-gray-400",children:"Dispute Deadline"}),(0,c.jsx)("div",{className:"text-amber-300 text-xs",children:s.disputeDeadline?formatDate(s.disputeDeadline):"N/A"})]})]}),(0,c.jsxs)("div",{className:"flex space-x-3",children:["pending"===s.escrowStatus&&(0,c.jsx)("button",{onClick:()=>null==r?void 0:r("pay",s.id),className:"flex-1 bg-amber-900/50 hover:bg-amber-800/50 text-amber-300 px-4 py-2 rounded-lg font-semibold transition-colors",children:"Complete Payment"}),"funded"===s.escrowStatus&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:()=>null==r?void 0:r("confirm",s.id),className:"flex-1 bg-green-900/50 hover:bg-green-800/50 text-green-300 px-4 py-2 rounded-lg font-semibold transition-colors",children:"Confirm Receipt"}),(0,c.jsx)("button",{onClick:()=>null==r?void 0:r("dispute",s.id),className:"flex-1 bg-red-900/50 hover:bg-red-800/50 text-red-300 px-4 py-2 rounded-lg font-semibold transition-colors",children:"Open Dispute"})]}),"disputed"===s.escrowStatus&&(0,c.jsx)("div",{className:"flex-1 text-center text-gray-400 py-2",children:"Dispute in progress - awaiting DAO resolution"}),("completed"===s.escrowStatus||"refunded"===s.escrowStatus)&&(0,c.jsxs)("div",{className:"flex-1 text-center text-gray-400 py-2",children:["Order ",s.escrowStatus]})]}),(0,c.jsx)("div",{className:"mt-4 pt-4 border-t border-amber-800/20",children:(0,c.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,c.jsx)("span",{className:"mr-2",children:"\uD83D\uDD12"}),(0,c.jsx)("span",{children:"All transactions are private and secured by blockchain escrow"})]})})]})},i=s(4413);let CartItemComponent=e=>{let{item:t,onUpdateQuantity:s,onRemove:r}=e,formatPrice=e=>"".concat(e.toFixed(3)," BLK");return(0,c.jsxs)("div",{className:"bg-gray-900/30 rounded-lg p-4",children:[(0,c.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,c.jsx)("div",{className:"w-16 h-16 bg-gray-700 rounded-lg flex items-center justify-center",children:t.image?(0,c.jsx)("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover rounded-lg"}):(0,c.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCE6"})}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h4",{className:"text-amber-300 font-medium text-sm mb-1",children:t.title}),(0,c.jsxs)("p",{className:"text-gray-400 text-xs mb-2",children:["by ",t.seller.slice(0,8),"..."]}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("div",{className:"text-amber-400 font-semibold",children:formatPrice(t.price)}),(0,c.jsx)("button",{onClick:()=>r(t.productId,t.seller),className:"text-red-400 hover:text-red-300 text-sm",children:"Remove"})]})]})]}),(0,c.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("span",{className:"text-gray-400 text-sm",children:"Qty:"}),(0,c.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,c.jsx)("button",{onClick:()=>s(t.productId,t.seller,Math.max(1,t.quantity-1)),className:"w-6 h-6 bg-gray-700 hover:bg-gray-600 rounded text-amber-300 text-sm",children:"-"}),(0,c.jsx)("span",{className:"text-amber-300 font-semibold w-8 text-center",children:t.quantity}),(0,c.jsx)("button",{onClick:()=>s(t.productId,t.seller,t.quantity+1),className:"w-6 h-6 bg-gray-700 hover:bg-gray-600 rounded text-amber-300 text-sm",children:"+"})]})]}),(0,c.jsx)("div",{className:"text-amber-300 font-semibold",children:formatPrice(t.price*t.quantity)})]})]})};var components_ShoppingCart=()=>{var e;let{cart:t,updateQuantity:s,removeFromCart:r,clearCart:a,getTotalAmount:n}=(0,i.jD)(),{user:l}=(0,i.aC)(),[o,x]=(0,d.useState)(!1),[m,u]=(0,d.useState)(!1),handleCheckout=async()=>{if(!l){window.location.href="/login";return}u(!0);try{console.log("Proceeding to checkout with cart:",t),a(),x(!1),alert("Order placed successfully! Check your orders page for details.")}catch(e){console.error("Checkout failed:",e),alert("Checkout failed. Please try again.")}finally{u(!1)}};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("button",{onClick:()=>x(!0),className:"relative bg-amber-900/50 hover:bg-amber-800/50 text-amber-300 p-3 rounded-lg transition-colors",children:["\uD83D\uDED2",t.length>0&&(0,c.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:t.reduce((e,t)=>e+t.quantity,0)})]}),o&&(0,c.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[(0,c.jsx)("div",{className:"absolute inset-0 bg-black/75",onClick:()=>x(!1)}),(0,c.jsx)("div",{className:"absolute right-0 top-0 h-full w-full max-w-md bg-black border-l border-amber-800/30",children:(0,c.jsxs)("div",{className:"flex flex-col h-full",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-amber-800/30",children:[(0,c.jsx)("h2",{className:"text-amber-300 text-xl font-bold",children:"Shopping Cart"}),(0,c.jsx)("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-amber-300 text-2xl",children:"\xd7"})]}),(0,c.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:0===t.length?(0,c.jsxs)("div",{className:"text-center text-gray-400 mt-8",children:[(0,c.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDED2"}),(0,c.jsx)("p",{children:"Your cart is empty"}),(0,c.jsx)("button",{onClick:()=>x(!1),className:"mt-4 text-amber-400 hover:text-amber-300 underline",children:"Continue Shopping"})]}):(0,c.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,c.jsx)(CartItemComponent,{item:e,onUpdateQuantity:s,onRemove:r},"".concat(e.productId,"-").concat(e.seller)))})}),t.length>0&&(0,c.jsxs)("div",{className:"border-t border-amber-800/30 p-6",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,c.jsx)("span",{className:"text-gray-300 font-semibold",children:"Total:"}),(0,c.jsx)("span",{className:"text-amber-300 text-xl font-bold",children:(e=n(),"".concat(e.toFixed(3)," BLK"))})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsx)("button",{onClick:handleCheckout,disabled:m,className:"w-full bg-amber-900/50 hover:bg-amber-800/50 disabled:bg-gray-800/50 text-amber-300 disabled:text-gray-500 py-3 rounded-lg font-semibold transition-colors",children:m?"Processing...":"Proceed to Checkout"}),(0,c.jsx)("button",{onClick:a,className:"w-full bg-red-900/50 hover:bg-red-800/50 text-red-300 py-2 rounded-lg font-semibold transition-colors",children:"Clear Cart"})]}),(0,c.jsx)("div",{className:"mt-4 text-xs text-gray-500 text-center",children:"\uD83D\uDD12 Secured by blockchain escrow"})]})]})})]})]})}}}]);