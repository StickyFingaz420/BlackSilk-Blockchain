(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{5135:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/order/confirmation",function(){return r(8729)}])},8729:function(e,s,r){"use strict";r.r(s);var t=r(5893),l=r(7294),i=r(1163),a=r(9008),n=r.n(a),d=r(1664),c=r.n(d),o=r(6677),x=r(4413),m=r(4695);s.default=()=>{let e=(0,i.useRouter)(),{id:s}=e.query,{user:r}=(0,x.aC)(),[a,d]=(0,l.useState)(null),[h,p]=(0,l.useState)(!0),[u,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!r){e.push("/login");return}s&&fetchOrder(s)},[r,s,e]);let fetchOrder=async e=>{try{let s=await fetch("/api/orders/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(s.ok){let e=await s.json();d(e)}else throw Error("Order not found")}catch(t){console.error("Failed to fetch order:",t);let s={id:e,buyer:(null==r?void 0:r.id)||"",seller:"seller_1",items:[{productId:"prod_1",productTitle:"Sample Product",quantity:2,price:.145,seller:"seller_1"}],totalAmount:.293,escrowStatus:m.Hb.Pending,status:m.iF.AwaitingPayment,createdAt:Date.now(),updatedAt:Date.now()};d(s)}finally{p(!1)}};return h?(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-300",children:"Loading order confirmation..."})]})}):a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"Order Confirmation - BlackSilk Marketplace"}),(0,t.jsx)("meta",{name:"description",content:"Your order has been placed successfully"})]}),(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 text-white",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-green-400",children:"Order Confirmed!"}),(0,t.jsx)(o.Uh,{level:m.uk.High})]}),(0,t.jsx)(o.e4,{})]}),(0,t.jsxs)("div",{className:"bg-green-900/20 border border-green-500/30 rounded-lg p-6 mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-green-400",children:"Your order has been placed successfully!"})]}),(0,t.jsx)("p",{className:"text-gray-300",children:"Your payment has been secured in escrow and the seller has been notified. You'll receive updates as your order progresses through the fulfillment process."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Order Details"}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Order ID"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("code",{className:"bg-gray-700 px-3 py-2 rounded text-purple-400 font-mono text-sm flex-1",children:a.id}),(0,t.jsx)("button",{onClick:()=>{(null==a?void 0:a.id)&&(navigator.clipboard.writeText(a.id),j(!0),setTimeout(()=>j(!1),2e3))},className:"bg-purple-600 hover:bg-purple-700 px-3 py-2 rounded text-sm transition-colors",children:u?"Copied!":"Copy"})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"font-semibold mb-3",children:"Items Ordered"}),(0,t.jsx)("div",{className:"space-y-3",children:a.items.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:["Product ID: ",e.productId]}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:["Quantity: ",e.quantity]}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:["Seller: ",e.seller]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-semibold",children:[e.price," BSK each"]}),(0,t.jsxs)("p",{className:"text-purple-400",children:[(e.price*e.quantity).toFixed(6)," BSK total"]})]})]},s))})]}),(0,t.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("span",{children:"Subtotal:"}),(0,t.jsxs)("span",{children:[a.totalAmount.toFixed(6)," BSK"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("span",{children:"Shipping:"}),(0,t.jsx)("span",{children:"0.001 BSK"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-lg font-semibold border-t border-gray-700 pt-2",children:[(0,t.jsx)("span",{children:"Total:"}),(0,t.jsxs)("span",{className:"text-purple-400",children:[(a.totalAmount+.001).toFixed(6)," BSK"]})]})]}),(0,t.jsxs)("div",{className:"mt-6 p-4 bg-gray-700 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Estimated Delivery"}),(0,t.jsx)("p",{className:"text-purple-400 font-medium",children:(()=>{let e=new Date;return e.setDate(e.getDate()+14),e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})()}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Standard shipping (14 days)"})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Escrow Protection"}),(0,t.jsx)(o.Hb,{status:a.escrowStatus,escrowAddress:a.escrowAddress||"pending...",amount:a.totalAmount}),(0,t.jsxs)("div",{className:"mt-4 p-4 bg-gray-700 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"How Escrow Works"}),(0,t.jsxs)("ol",{className:"text-sm text-gray-300 space-y-1",children:[(0,t.jsx)("li",{children:"1. Your payment is held securely in escrow"}),(0,t.jsx)("li",{children:"2. Seller prepares and ships your order"}),(0,t.jsx)("li",{children:"3. You receive the package and confirm delivery"}),(0,t.jsx)("li",{children:"4. Payment is released to the seller"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Order Tracking"}),(0,t.jsx)(o.BG,{order:a})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"What's Next?"}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,t.jsx)("span",{className:"text-xs font-bold",children:"1"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Seller Notification"}),(0,t.jsx)("p",{className:"text-gray-400",children:"The seller has been notified of your order and will begin processing it."})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,t.jsx)("span",{className:"text-xs font-bold",children:"2"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Order Preparation"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Your items will be prepared and packaged for shipping."})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,t.jsx)("span",{className:"text-xs font-bold",children:"3"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Shipment & Tracking"}),(0,t.jsx)("p",{className:"text-gray-400",children:"You'll receive tracking information once the package ships."})]})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 mt-8 justify-center",children:[(0,t.jsx)(c(),{href:"/dashboard",className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"View in Dashboard"}),(0,t.jsx)(c(),{href:"/",className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"Continue Shopping"}),(0,t.jsx)("button",{onClick:()=>window.print(),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"Print Confirmation"})]})]})})]}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-red-400 mb-4",children:"Order Not Found"}),(0,t.jsx)("p",{className:"text-gray-300 mb-6",children:"The order you're looking for doesn't exist or you don't have permission to view it."}),(0,t.jsx)(c(),{href:"/dashboard",className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg",children:"Go to Dashboard"})]})})}},1163:function(e,s,r){e.exports=r(9974)}},function(e){e.O(0,[774,996,413,531,677,888,179],function(){return e(e.s=5135)}),_N_E=e.O()}]);